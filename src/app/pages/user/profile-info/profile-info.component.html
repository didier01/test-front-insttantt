<div class="container-fluid">

    <app-loader *ngIf="loader"></app-loader>
    <section class="container-form " id="container-form">
        <!-- <div class="part-info">
        <div class="image-part-info">
            <img src="./../../../../assets/icons/logo-2.jpg" alt="" srcset="">
        </div>
        <div class="text">
            Lorem ipsum, dolor sit amet consectetur adipisicing elit. Nam distinctio porro facilis? Fuga ad neque,
            similique quo perferendis in! Deserunt ducimus architecto dignissimos. Aperiam sed, repudiandae saepe dolore
            ratione accusantium?
        </div>
    </div> -->
        <div class="part-form">
            <div class="header-container-form">
                <h1>Información de usuario</h1>
            </div>
            <form class="register-form" [formGroup]="userForm">

                <div class="inputs">

                    <div class="row">
                        <fieldset>
                            <legend>
                                <label for="documentType" class="text-primary form-label">
                                    Tipo de documento *
                                </label>
                            </legend>
                            <select class="form-control custom-input"
                                [ngClass]="{'is-invalid': validateFields('documentType','required')}"
                                formControlName="documentType">
                                <option *ngFor="let item of documentTypes" [value]="item.id">{{item.name}}
                                </option>
                            </select>
                        </fieldset>

                        <span class="input-error" *ngIf="validateFields('documentType','required')">Este campo es
                            obligatorio.</span>
                    </div>

                    <div class="row">
                        <fieldset>
                            <legend>
                                <label for="documentNumber" class="text-primary form-label">
                                    Número de documento *
                                </label>
                            </legend>
                            <input type="number" name="documentNumber" class="form-control custom-input"
                                formControlName="documentNumber"
                                [ngClass]="{'is-invalid': validateFields('documentNumber','required')}">
                        </fieldset>

                        <span class="input-error" *ngIf="validateFields('documentNumber','required')">Este campo es
                            obligatorio.</span>
                    </div>
                </div>

                <div class="row">
                    <fieldset>
                        <legend>
                            <label for="expeditionDate" class="text-primary form-label">
                                Fecha de expedición *
                            </label>
                        </legend>
                        <input type="date" name="expeditionDate" class="form-control custom-input"
                            formControlName="expeditionDate"
                            [ngClass]="{'is-invalid': validateFields('expeditionDate','required')}" [max]="todayDate">
                    </fieldset>

                    <span class="input-error" *ngIf="validateFields('expeditionDate','required')">Este campo es
                        obligatorio.</span>

                </div>

                <div class="inputs">
                    <div class="row">
                        <fieldset>
                            <legend>
                                <label for="firstname" class="text-primary form-label">
                                    Nombre *
                                </label>
                            </legend>
                            <input name="firstname" class="form-control custom-input" formControlName="firstname"
                                [ngClass]="{'is-invalid': validateFields('firstname','required')}" minlength="2"
                                maxlength="100">
                        </fieldset>

                        <span class="input-error" *ngIf="validateFields('firstname','required')">Este campo es
                            obligatorio.</span>

                        <span class="input-error" *ngIf="validateFields('firstname','minlength')">Este campo debe
                            contener
                            más de
                            2 caracteres.</span>

                    </div>

                    <div class="row">
                        <fieldset>
                            <legend>
                                <label for="lastname" class="text-primary form-label">
                                    Apellido *
                                </label>
                            </legend>
                            <input name="lastname" class="form-control custom-input" formControlName="lastname"
                                [ngClass]="{'is-invalid': validateFields('lastname','required')}" minlength="2"
                                maxlength="100">
                        </fieldset>

                        <span class="input-error" *ngIf="validateFields('lastname','required')">Este campo es
                            obligatorio.</span>

                        <span class="input-error" *ngIf="validateFields('firstname','minlength')">Este campo debe
                            contener
                            más de
                            2 caracteres.</span>

                    </div>
                </div>

                <div class="row">
                    <fieldset>
                        <legend>
                            <label for="birthdate" class="text-primary form-label">
                                Fecha de nacimiento *
                            </label>
                        </legend>
                        <input type="date" name="birthdate" class="form-control custom-input"
                            formControlName="birthdate" (change)="validateAdultAge()"
                            [ngClass]="{'is-invalid': validateFields('birthdate','required')}">
                    </fieldset>

                    <span class="input-error" *ngIf="validateFields('birthdate','required')">Este campo es
                        obligatorio.</span>

                </div>

                <div class="row">
                    <fieldset>
                        <legend>
                            <label for="phoneNumber" class="text-primary form-label">
                                Número de telefono *
                            </label>
                        </legend>
                        <input type="text" onkeypress="if (event.keyCode > 57) event.returnValue = false;"
                            name="phoneNumber" class="form-control custom-input" formControlName="phoneNumber"
                            maxlength="10" [ngClass]="{'is-invalid': validateFields('phoneNumber','required')}">
                    </fieldset>

                    <span class="input-error" *ngIf="validateFields('phoneNumber','required')">Este campo es
                        obligatorio.</span>
                </div>

                <div class="row">
                    <fieldset>
                        <legend>
                            <label for="email" class="text-primary form-label">
                                Correo electrónico *
                            </label>
                        </legend>
                        <input type="email" name="email" class="form-control custom-input" formControlName="email"
                            [ngClass]="{'is-invalid': validateFields('email','required')}">
                    </fieldset>

                    <span class="input-error" *ngIf="validateFields('email','required')">Este campo es
                        obligatorio.</span>

                    <span class="input-error" *ngIf="validateFields('email', 'pattern')">El correo electrónico no es
                        válido</span>

                </div>

                <div class="inputs">
                    <div class="row">
                        <fieldset>
                            <legend>
                                <label for="country" class="text-primary form-label">
                                    País
                                </label>
                            </legend>
                            <select (change)="changeCountry($event)"
                                [ngClass]="{'is-invalid': validateFields('country','required')}"
                                class="form-control custom-input" formControlName="country">
                                <option *ngFor="let item of countries" [value]="item.country">{{item.country}}
                                </option>
                            </select>
                        </fieldset>

                        <span class="input-error" *ngIf="validateFields('country','required')">Este campo es
                            obligatorio.</span>
                    </div>

                    <div class="row">
                        <fieldset>
                            <legend>
                                <label for="city" class="text-primary form-label">
                                    Cuidad
                                </label>
                            </legend>
                            <select [ngClass]="{'is-invalid': validateFields('city','required')}"
                                class="form-control custom-input" formControlName="city">
                                <option *ngFor="let item of cities" [value]="item">{{item}}
                                </option>
                            </select>
                        </fieldset>

                        <span class="input-error" *ngIf="validateFields('city','required')">Este campo es
                            obligatorio.</span>
                    </div>
                </div>

                <div class="row" >
                    <fieldset>
                        <legend>
                            <label for="address" class="text-primary form-label">
                                Dirección
                            </label>
                        </legend>
                        <input type="text" name="address" class="form-control custom-input" formControlName="address"
                            maxlength="100" minlength="10"
                            [ngClass]="{'is-invalid': validateFields('address','required')}">
                    </fieldset>

                    <span class="input-error" *ngIf="validateFields('address','minlength')">Este campo debe contener
                        más de 10 caracteres.</span>

                    <span class="input-error" *ngIf="validateFields('address','required')">Este campo es
                        obligatorio.</span>

                </div>
                <div class="row ">
                    <ng-container *ngIf="disableCam; else withoutImage">
                        <div class="row-camera">
                            <button class="btn btn-enable-cam" (click)="showCamera()">Tomar foto</button>
                            <img src="{{currentUser.photoProfile ? currentUser.photoProfile : currentImage }} " alt="" width="100%" loading="lazy">
                            <!-- <img [src]="currentImage.imageAsDataUrl" alt="" width="100%" loading="lazy"> -->
                        </div>

                    </ng-container>

                    <ng-template #withoutImage>
                        <div class="row-camera">

                            <div class="control-buttons">
                                <button class="btn btn-primary" (click)="takeSnapshot()">Capturar</button>
                                <button class="btn btn-secondary-outline" (click)="onOffWebCame()">{{showWebcam ?
                                    'Apagar': 'Encender'}} Cámara</button>
                                <button class="btn btn-danger-outline" (click)="cleanPhoto()">Borrar</button>
                                <button class="btn btn-danger-outline" (click)="showCamera()">Cancelar</button>
                            </div>

                            <webcam [trigger]="triggerObservable" [allowCameraSwitch]="true"
                                (imageCapture)="handleImage($event)" *ngIf="showWebcam"
                                [switchCamera]="nextWebcamObservable" mirrorImage="never"></webcam>

                        </div>
                    </ng-template>
                </div>

            </form>

            <div class="container-buttons">
                <button class="btn-submit-form" (click)="submitForm()">Actualizar</button>
            </div>
        </div>
    </section>

</div>